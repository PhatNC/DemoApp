<!DOCTYPE html>
<html lang="en">

<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <script type="text/javascript">
    google.charts.load("current", { packages: ["corechart"] });
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
      let arrCount = {
        'pedestrian': 0,
        'people': 0,
        'bicycle': 0,
        'car': 0,
        'van': 0,
        'truck': 0,
        'tricycle': 0,
        'awningtricycle': 0,
        'bus': 0,
        'motor': 0
      }

      var urlParams = new URLSearchParams(window.location.search);

      var obj = urlParams.toString().split('&');

      obj.forEach(element => {
        if (element.length > 0) {
          objInfo = element.split('=');
          className = objInfo[0];
          arrCount[objInfo[0]] = parseInt(objInfo[1]);
        }
      });

      var data = google.visualization.arrayToDataTable([
        ["Element", "Density", { role: "style" }],
        ["pedestrian", arrCount.pedestrian, "#4285F6"],
        ["people", arrCount.people, "#DC4439"],
        ["bicycle", arrCount.bicycle, "#FFB20E"],
        ["car", arrCount.car, "#109D58"],
        ["van", arrCount.van, "#AB46BC"],
        ["truck", arrCount.truck, "#00ACC4"],
        ["tricycle", arrCount.tricycle, "#FF7143"],
        ["awningtricycle", arrCount.awningtricycle, "#9F9F23"],
        ["bus", arrCount.bus, "color: #4E5CA3"],
        ["motor", arrCount.motor, "color: #F26192"]
      ]);


      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
        {
          calc: "stringify",
          sourceColumn: 1,
          type: "string",
          role: "annotation"
        },
        2]);

      var options = {
        title: "Objective Distribution",
        height: 500,
        bar: { groupWidth: "100%" },
        legend: { position: "none" },
      };
      var chart = new google.visualization.BarChart(document.getElementById("barchart_values"));
      chart.draw(view, options);
    }
  </script>
</head>

<body>
  <div id="barchart_values" style="width: 100%;"></div>
  <div>
    <p><a href="index.html">Back to Homepage</a></p>
    <p><a href="/chart">Back to Chart</a></p>
  </div>
</body>

</html>